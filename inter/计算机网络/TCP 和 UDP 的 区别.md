两个都是传输层，主要区别有

- TCP 是面向连接的，有三次握手和四次挥手的连接管理过程；UDP 是无连接协议，只要知道接收端的 IP 和端口，且网络是可达的，任何主机都可以向接收端发送数据。

- TCP 面向字节流，UDP 面向报文。

  - TCP：在连接持续的过程中，socket 中收到的数据都是由同一台主机发出的，因此，保证数据有序的到达就行了，至于每次读取多少数据自己看着办。**只调用了一次 write，发送了 100 个字节，但是对方可以分 10 次收完，每次 10 个字节；你也可以调用 10 次 write，每次 10 个字节，但是对方可以一次就收完**。

  - UDP：UDP 是基于报文的，在接收的时候，每次最多只能读取一个报文，报文和报文是不会合并的，如果缓冲区小于报文长度，则多出的部分会被丢弃。也就说，如果不指定MSG_PEEK标志，每次读取操作将消耗一个报文。

- TCP 提供可靠的服务，通过 TCP 连接传送的数据，无差错，不丢失，不重复，且按序到达。

  UDP 尽最大努力交付，即不保证可靠交付。

- TCP 连接只能是点到点、一对一的。UDP 支持一对一，一对多，多对一和多对多的交互通信。

- 粘（nian）包和拆包问题：对于 UDP，其报文首部设置了两个字节大小的长度位用来标记整个数据报的长度，因此在应用层能很好的将不同的数据报文区分开，从而避免粘包和拆包的问题。同样，HTTP 的首部集合中也包含了 Content-Length 用于记录实体的大小。而对于 TCP，作为一个面向字节的传输层协议，它不关心传输的内容结构，而只专注于可靠的传输，所以"TCP粘包问题"是个假问题。



应用上：

- UDP：DNS（保证时效）

