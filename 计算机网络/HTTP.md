## 报文结构

所有HTTP数据报都包含三部分，分别是起始行（start line）、首部（header）、报文主体（body）。根据作用，HTTP 报文可以分为请求报文和响应报文，请求报文的起始行被称为请求行，而响应报文的起始行被称为响应行。

请求报文的格式：

```
<method> <request-URL> <version>
<headers>
<entity-body>
```

响应报文的格式：

```
<version> <status> <reason-phrase>
<headers>
<entity-body>
```

下面对各部分进行解释：

1. 方法（method）：客户端希望对服务器资源执行的动作，是一个单独的动词，如GET、POST、PUT、DELETE、HEAD等
2. 请求URL（request-URL）：客户端所请求资源的完整URL
3. 版本（version）：报文所使用的HTTP版本号，版本格式：HTTP/\<major>\<minor>，其中 major 为主版本号，minor 为次版本号
4. 状态码（status-code）：一个三位数，描述请求过程发生的情况，可用第一位数字进行分类
5. 原因短语（reason-phrase）：用来描述状态码，包含行终止序列之前的所有文本，如 HTTP/1.0 200 OK 中的OK
6. 首部（header）：零个或多个，用键值对的形式表示，以一个空行（CRLF）结束。
7. 实体主体（entity-body）：包含一个任意数据组成的数据块，并不是所有报文都有这部分，有时报文只是以一个空行结束。

## 请求方法

方法类型主要有下面几种

|  方法   |                        描述                        | 是否包含主体 |
| :-----: | :------------------------------------------------: | :----------: |
|   GET   |                从服务器获取一份文档                |      否      |
|  HEAD   |               只从服务器获取报文首部               |      否      |
|  POST   |             向服务器发送需要处理的数据             |      是      |
|   PUT   |            将请求的主体部分存储在服务器            |      是      |
|  TRACE  | 对可能进过代理服务器的传送到服务器上的报文进行追踪 |      否      |
| OPTIONS |           决定可能在服务器上执行哪些方法           |      否      |
| DELETE  |               从服务器上删除一份文档               |      否      |

## 状态码

状态码分类

| 整体范围 | 已定义范围 |    作用    |
| :------: | :--------: | :--------: |
| 100-199  |  100-101   |  信息提示  |
| 200-299  |  200-206   |    成功    |
| 300-399  |  300-305   |   重定向   |
| 400-499  |  400-415   | 客户端错误 |
| 500-599  |  500-505   | 服务端错误 |



## session 与 cookie

**cookie：**  指某些网站为了辨别用户身份而储存在用户本地终端（Client Side）上的数据（通常经过加密）

因为 HTTP 协议是无状态的，即服务器不知道用户上一次做了什么，这严重阻碍了交互式Web应用程序的实现。例如当登录一个网站时，网站往往会请求用户输入用户名和密码，并且用户可以勾选“下次自动登录”。如果勾选了，那么下次访问同一网站时，用户会发现没输入用户名和密码就已经登录了。这正是因为前一次登录时，服务器发送了包含登录凭据（用户名加密码的某种加密形式）的Cookie到用户的硬盘上。第二次登录时，如果该 Cookie 尚未到期，浏览器会发送该 Cookie，服务器验证凭据，于是不必输入用户名和密码就让用户登录了。

Cookie 总是保存在客户端中，按在客户端中的存储位置，可分为内存 Cookie 和硬盘 Cookie，内存 Cookie 持续时间短，浏览器关闭后就消失了，硬盘 Cookie 则可以长期保存。

Cookie 的缺点

- Cookie 会被附加在每个 HTTP 请求中，所以无形中增加了流量。
- 由于在HTTP请求中的 Cookie 是明文传递的，所以安全性成问题，除非用HTTPS。
- Cookie的大小限制在4KB左右，对于复杂的存储需求来说是不够用的。
- 存在 Cookie 窃取、Cookie 篡改等安全问题

**session**：存储用户信息到服务器的某个文件中，它运行依赖 session id，而 session id 是存在 cookie 中的，所以如果浏览器禁用了 cookie ，那么 session 也会失效，但是可以通过比如在 url 中传递 session_id 的方式

以身份验证为例，在双方建立连接后，服务端创建 session，将 session id 存到客户端 cookie 中，客户端服务端时下次访问时，只需要将 cookie 发送到服务端即可，服务端通过 session 验证用户身份进行后续操作